(this.webpackJsonpmoneylover=this.webpackJsonpmoneylover||[]).push([[0],{137:function(e,t,r){e.exports={AppHeader:"Header_AppHeader__rEkyY","ant-menu-item":"Header_ant-menu-item__4qJu2","ant-page-header":"Header_ant-page-header__mdTpg","ant-menu":"Header_ant-menu__kGI51","ant-menu-light":"Header_ant-menu-light__3WaJs",Logout:"Header_Logout__3wQSh"}},170:function(e,t,r){e.exports={FormContainer:"Record_FormContainer__uMdQv",Form:"Record_Form__8Ollr","ant-card-head":"Record_ant-card-head__3S9DO"}},177:function(e,t,r){e.exports={Footer:"footer_Footer__oVnzi"}},189:function(e,t,r){},190:function(e,t,r){},283:function(e,t,r){e.exports={BtnDelete:"Records_BtnDelete__mARzC"}},290:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(29),c=r.n(a),s=(r(189),r(24)),i=r(59),d=r(60),l=r(64),u=r(63),j=(r(190),r(28)),p=r(295),b=r(294),m=r(297),h=r(47),O=r(299),g=r(300),f=r(301),x=r(68),y=r.n(x),v=r.p+"static/media/logo.2d27ead7.svg",_=r(74),w="AIzaSyCgYnE69ejd0DLiw7uBLbraJQYw2PPxdkM",S="https://fir-app-6e33a.firebaseio.com/",k=r(8),C=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={error:!1,loading:!1,message:""},e}return Object(d.a)(r,[{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{className:_.Login,children:Object(k.jsx)("div",{className:_.LoginContainer,children:Object(k.jsxs)(p.a,{bordered:!0,className:_.LoginCard,children:[Object(k.jsx)("img",{src:v,className:_.Logo,alt:"logo"}),Object(k.jsx)("h1",{children:"JSX Learning"}),Object(k.jsx)("br",{}),this.state.error&&this.state.message,Object(k.jsxs)(b.a,Object(s.a)(Object(s.a)({},{labelCol:{span:8},wrapperCol:{span:24}}),{},{name:"basic",initialValues:{username:"quochuy.dev@gmail.com",password:"Quochuydev548!",remember:!0},onFinish:function(t){var r={email:t.username,password:t.password,returnSecureToken:!0};e.setState({loading:!0}),y.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+w,r).then((function(t){localStorage.setItem("auth",JSON.stringify(t.data)),e.props.history.push({pathname:"/record"}),e.setState({loading:!1})})).catch((function(t){e.setState({error:!0}),e.setState({message:Object(k.jsx)("div",{className:_.Error,children:"Username or password is incorrect!"})}),console.log(t),e.setState({loading:!1})}))},onFinishFailed:function(e){console.log("onFinishFailed error : ",e)},children:[Object(k.jsx)(b.a.Item,{name:"username",rules:[{required:!0,message:"Username is required"}],children:Object(k.jsx)(m.a,{placeholder:"Username",prefix:Object(k.jsx)(O.a,{})})}),Object(k.jsx)(b.a.Item,{name:"password",rules:[{required:!0,message:"Password is required"}],children:Object(k.jsx)(m.a.Password,{placeholder:"Password",prefix:Object(k.jsx)(g.a,{})})}),Object(k.jsx)(b.a.Item,Object(s.a)(Object(s.a)({},{wrapperCol:{span:24}}),{},{children:Object(k.jsx)(h.a,{type:"primary",htmlType:"submit",disabled:this.state.loading,block:!0,icon:Object(k.jsx)(f.a,{}),children:this.state.loading?"Please wait..":"Login"})}))]}))]})})})}}]),r}(o.a.Component),R=r(88),L=r(69),D=r(298),E=r(90),N=r(48),I=r(98),A=r(293),F=r(170),J=r(83),T="ADD_RECORD",H="GET_RECORDS",U="DELETE_RECORD",Y="UPDATE_RECORD",P=function(e,t){return{type:H,records:e,error:t}},M=function(e,t){return{type:Y,record:e,error:t}},q=[{id:1,name:"\u0102n u\u1ed1ng",parentId:null},{id:2,name:"\u0102n",parentId:1},{id:3,name:"U\u1ed1ng",parentId:1}],z=r(172),B=r(42),V=r.n(B);var Q=Object(J.b)((function(e){return{propRecord:e.record,propError:e.error}}),(function(e){return{onCreate:function(t){return e(function(e){var t=JSON.parse(localStorage.getItem("auth"));return function(r){y.a.post(S+"records.json?auth="+t.idToken,e).then((function(e){console.log("add record response: ",e),D.b.success("Success! Record information saved successfully."),r(M({response:e},!1))})).catch((function(e){console.log(e.repsonse),D.b.error("Opps! Something went wrong. Unable to save record record."),r(M(null,!0))}))}}(t))},onUpdate:function(t){return e(function(e){var t=JSON.parse(localStorage.getItem("auth"));return function(r,n){y.a.put(S+"records/"+e.key+".json?auth="+t.idToken,e).then((function(e){var t=e.data;n().records.forEach((function(e){e.key===t.key&&(e=t)})),D.b.success("Success! Record information saved successfully."),r(M(t,!1))})).catch((function(e){console.log(e.repsonse),D.b.error("Opps! Something went wrong. Unable to save record record."),r(P(n().records,!0))}))}}(t))}}}))((function(e){var t,r,a=o.a.createRef(),c=(JSON.parse(localStorage.getItem("auth")),{amount:0,time:new Date,type:null}),i=Object(n.useState)((null===(t=e.location.state)||void 0===t?void 0:t.record)||c),d=Object(L.a)(i,2),l=d[0],u=d[1],j=Object(n.useState)(!1),p=Object(L.a)(j,2),m=p[0],O=(p[1],Object(n.useState)(!1)),g=Object(L.a)(O,2),f=g[0],x=g[1],y=Object(n.useState)(""),v=Object(L.a)(y,2),_=v[0];return v[1],Object(n.useEffect)((function(){e.propError&&(x(!1),D.b.error("Something went wrong. Unable to save record information."))}),[e.propError]),Object(n.useEffect)((function(){e.propRecord&&f&&(x(!1),e.history.push({pathname:"/records"}))}),[e.propRecord]),Object(k.jsx)(E.a,{className:F.FormContainer,children:Object(k.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[m&&_,Object(k.jsxs)(b.a,(r={name:"basic",ref:a},Object(R.a)(r,"name","control-ref"),Object(R.a)(r,"onFinish",(function(){console.log("onFinish data : ",l),console.log("props.location.state : ",e.location.state),e.location.state&&e.location.state.record&&e.location.state.record.key?(x(!0),e.onUpdate(Object(s.a)(Object(s.a)({},l),{},{updatedAt:new Date,key:e.location.state.record.key}))):(x(!0),e.onCreate(Object(s.a)(Object(s.a)({},l),{},{createdAt:new Date,updatedAt:new Date,deletedAt:null})),x(!0))})),Object(R.a)(r,"children",[Object(k.jsx)(z.a,{className:"ant-input w-full",thousandSeparator:!0,suffix:"\u0111",style:{textAlign:"right"},value:l.amount,onValueChange:function(e){u(Object(s.a)(Object(s.a)({},l),{},{amount:e.floatValue}))}}),Object(k.jsx)("br",{}),Object(k.jsx)(I.a,{className:"m-t-md w-full",label:"Type",name:"type",placeholder:"Type",onChange:function(e){u(Object(s.a)(Object(s.a)({},l),{},{type:e}))},children:q.map((function(e){return Object(k.jsx)(I.a.Option,{value:e.id,children:e.name},e.id)}))}),Object(k.jsx)("br",{}),Object(k.jsx)(A.a,{className:"m-t-md w-full",name:"time",onChange:function(e){return u(Object(s.a)(Object(s.a)({},l),{},{time:new Date(e)}))},defaultValue:l.time?V()(l.time,"YYYY-MM-DD"):null}),Object(k.jsx)("br",{}),Object(k.jsx)(h.a,{className:"m-t-md",type:"primary",htmlType:"submit",disabled:f,loading:f,children:f?"Saving..":"Submit"})]),r))]})})})),W=r(174),K=r(292),G=(r(283),function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).user=JSON.parse(localStorage.getItem("auth")),n.cols=[{title:"day",key:"day",render:function(e,t){return Object(k.jsx)("span",{children:t&&t.days[0]&&t.days[0].time?V()(t.days[0].time).format("DD-MM-YYYY"):null})}}],n.subColumns=[{title:"type",dataIndex:"type",key:"type",render:function(e,t){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("span",{onClick:function(){return n.onEdit(t)},children:q.find((function(e){return e.id==t.type}))?q.find((function(e){return e.id==t.type})).name:null})})}},{title:"Amount",dataIndex:"amount",key:"amount",render:function(e,t){return Object(k.jsx)("span",{onClick:function(){return n.onEdit(t)},children:t.amount})}}],n.onEdit=function(e){n.props.history.push({pathname:"/records/record",state:{record:e}})},n.navigate=function(){n.props.history.push({pathname:"/records/record"})},n.state={records:[],error:!1,loading:!1,message:""},n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){this.props.getRecords()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{children:Object(k.jsx)(K.a,{rowKey:"day",dataSource:this.props.propRecords,columns:this.cols,size:"small",pagination:!1,scroll:{x:"100%"},showHeader:!1,defaultExpandAllRows:!0,expandedRowRender:function(t){return Object(k.jsx)(K.a,{rowKey:"key",columns:e.subColumns,dataSource:t.days,pagination:!1,showHeader:!1})}})})}}]),r}(o.a.Component)),X=Object(J.b)((function(e){var t,r=e.records,n={},o=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;o[t]=a.filter((function(r){var n=r.time;return!!n&&"".concat(e,"-").concat(t)===n.slice(5,10)}))},a=Object(W.a)(r);try{for(a.s();!(t=a.n()).done;){var c=t.value.time;if(c){var s=c.match(/\d+/g),i=Object(L.a)(s,3),d=(i[0],i[1]),l=i[2];n||(n={}),o(d,l)}}}catch(O){a.e(O)}finally{a.f()}for(var u=[],j=0,p=Object.entries(n);j<p.length;j++){var b=Object(L.a)(p[j],2),m=b[0],h=b[1];u.push({day:m,days:h})}return console.log(u),{propRecords:u,propError:e.error}}),(function(e){return{onDelete:function(t){return e(function(e){var t=JSON.parse(localStorage.getItem("auth"));return function(r,n){y.a.delete(S+"records/"+e.key+"/.json?auth="+t.idToken).then((function(t){var o=n().records.filter((function(t){return t.key!==e.key}));r(P(o,!1)),D.b.success("Record record deleted.")})).catch((function(e){console.log(e.response),r(P(null,!0)),D.b.error("Opps! Something went wrong. Unable to delete record record.")}))}}(t))},getRecords:function(){return e(function(){var e=JSON.parse(localStorage.getItem("auth"));return function(t){y.a.get(S+"records.json?auth="+e.idToken).then((function(e){var r=[];for(var n in e.data)r.push({key:n,amount:e.data[n].amount,type:e.data[n].type,time:e.data[n].time,createdAt:e.data[n].createdAt});t(P(r,!1))})).catch((function(e){console.log(e.repsonse),t(P([],!0)),D.b.error("Session expired, Please login.")}))}}())}}}))(G),Z=r(137),$=r(52),ee=r(296),te=r(302),re=r(303),ne=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={current:window.location.pathname},e.navigate=function(t){e.props.history.push(t.key),"/login"===t.key?localStorage.clear():e.setState({current:window.location.pathname})},e}return Object(d.a)(r,[{key:"render",value:function(){var e=this.state.current,t=Object(k.jsxs)($.a,{onClick:this.navigate,selectedKeys:[e],mode:"horizontal",theme:"dark",children:[Object(k.jsx)($.a.Item,{icon:Object(k.jsx)(te.a,{}),children:"Records"},"/"),Object(k.jsx)($.a.Item,{icon:Object(k.jsx)(re.a,{}),className:Z.Logout,children:"Logout"},"/login")]});return Object(k.jsx)(ee.a,{className:Z.AppHeader,children:t})}}]),r}(o.a.Component),oe=r(177),ae=r(304),ce=r(93);var se=function(e){return Object(k.jsx)("footer",{className:oe.Footer,children:Object(k.jsx)(ce.b,{to:"/records/record",children:Object(k.jsx)(ae.a,{})})})},ie=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){var e,t,r=localStorage.getItem("auth");return e=Object(k.jsx)(j.d,{}),r?(e=Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{path:"/records/record",component:Q}),Object(k.jsx)(j.b,{path:"/records",component:X}),Object(k.jsx)(j.b,{path:"/",extact:!0,component:X}),Object(k.jsx)(j.a,{from:"/login",to:"/record"})]}),t=Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(ne,Object(s.a)({},this.props)),Object(k.jsx)("main",{children:e}),Object(k.jsx)(se,{})]})):(e=Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{path:"/login",component:C}),Object(k.jsx)(j.b,{path:"/",extact:!0,component:C}),Object(k.jsx)(j.a,{from:"/record",to:"/login"})]}),t=Object(k.jsx)("div",{className:"App",children:e})),Object(k.jsx)(o.a.Fragment,{children:t})}}]),r}(n.Component),de=Object(j.g)(ie);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=r(96),ue={records:[],updated:!1,error:!1},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(s.a)(Object(s.a)({},e),{},{records:t.records,error:t.error});case T:return Object(s.a)(Object(s.a)({},e),{},{record:t.record});case Y:return Object(s.a)(Object(s.a)({},e),{},{record:t.record,error:t.error});case U:return console.log(t),Object(s.a)(Object(s.a)({},e),{},{updated:t.updated});default:return e}},pe=r(178),be=Object(le.c)(je,Object(le.a)((function(e){return function(e){return function(t){return e(t)}}}),pe.a));c.a.render(Object(k.jsx)(o.a.Fragment,{children:Object(k.jsx)(ce.a,{children:Object(k.jsx)(J.a,{store:be,children:Object(k.jsx)(de,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,r){e.exports={Login:"Login_Login__3HZR_",LoginContainer:"Login_LoginContainer__37N0b",LoginCard:"Login_LoginCard__2LDlw","ant-card-body":"Login_ant-card-body__2jmDS",Logo:"Login_Logo__2MwYJ",Error:"Login_Error__25cPh"}}},[[290,1,2]]]);
//# sourceMappingURL=main.fe7f9981.chunk.js.map