(this.webpackJsonpmoneylover=this.webpackJsonpmoneylover||[]).push([[0],{145:function(e,t,r){e.exports={AppHeader:"Header_AppHeader__rEkyY","ant-menu-item":"Header_ant-menu-item__4qJu2","ant-page-header":"Header_ant-page-header__mdTpg","ant-menu":"Header_ant-menu__kGI51","ant-menu-light":"Header_ant-menu-light__3WaJs",Logout:"Header_Logout__3wQSh"}},178:function(e,t,r){e.exports={FormContainer:"Record_FormContainer__uMdQv",Form:"Record_Form__8Ollr","ant-card-head":"Record_ant-card-head__3S9DO"}},181:function(e,t,r){e.exports={BtnDelete:"Records_BtnDelete__mARzC"}},183:function(e,t,r){e.exports={Footer:"footer_Footer__oVnzi"}},192:function(e,t,r){},193:function(e,t,r){},292:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(31),c=r.n(o),s=(r(192),r(27)),i=r(63),l=r(64),d=r(67),u=r(66),j=(r(193),r(30)),p=r(299),b=r(297),h=r(301),m=r(36),O=r(303),f=r(304),g=r(305),x=r(71),v=r.n(x),y=r.p+"static/media/logo.2d27ead7.svg",w=r(77),_="AIzaSyCgYnE69ejd0DLiw7uBLbraJQYw2PPxdkM",S="https://fir-app-6e33a.firebaseio.com/",k=r(9),C=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={error:!1,loading:!1,message:""},e}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{className:w.Login,children:Object(k.jsx)("div",{className:w.LoginContainer,children:Object(k.jsxs)(p.a,{bordered:!0,className:w.LoginCard,children:[Object(k.jsx)("img",{src:y,className:w.Logo,alt:"logo"}),Object(k.jsx)("h1",{children:"JSX Learning"}),Object(k.jsx)("br",{}),this.state.error&&this.state.message,Object(k.jsxs)(b.a,Object(s.a)(Object(s.a)({},{labelCol:{span:8},wrapperCol:{span:24}}),{},{name:"basic",initialValues:{username:"quochuy.dev@gmail.com",password:"Quochuydev548!",remember:!0},onFinish:function(t){var r={email:t.username,password:t.password,returnSecureToken:!0};e.setState({loading:!0}),v.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+_,r).then((function(t){localStorage.setItem("auth",JSON.stringify(t.data)),e.props.history.push({pathname:"/record"}),e.setState({loading:!1})})).catch((function(t){e.setState({error:!0}),e.setState({message:Object(k.jsx)("div",{className:w.Error,children:"Username or password is incorrect!"})}),console.log(t),e.setState({loading:!1})}))},onFinishFailed:function(e){console.log("onFinishFailed error : ",e)},children:[Object(k.jsx)(b.a.Item,{name:"username",rules:[{required:!0,message:"Username is required"}],children:Object(k.jsx)(h.a,{placeholder:"Username",prefix:Object(k.jsx)(O.a,{})})}),Object(k.jsx)(b.a.Item,{name:"password",rules:[{required:!0,message:"Password is required"}],children:Object(k.jsx)(h.a.Password,{placeholder:"Password",prefix:Object(k.jsx)(f.a,{})})}),Object(k.jsx)(b.a.Item,Object(s.a)(Object(s.a)({},{wrapperCol:{span:24}}),{},{children:Object(k.jsx)(m.a,{type:"primary",htmlType:"submit",disabled:this.state.loading,block:!0,icon:Object(k.jsx)(g.a,{}),children:this.state.loading?"Please wait..":"Login"})}))]}))]})})})}}]),r}(a.a.Component),D=r(92),R=r(72),L=r(302),E=r(94),N=r(52),A=r(298),I=r(296),F=r(178),T=r(87),J="ADD_RECORD",H="GET_RECORDS",U="DELETE_RECORD",P="UPDATE_RECORD",Y=function(e,t){return{type:H,records:e,error:t}},M=function(e,t){return{type:P,record:e,error:t}},q=[{id:1,name:"\u0102n u\u1ed1ng",parentId:null},{id:2,name:"\u0102n",parentId:1},{id:3,name:"U\u1ed1ng",parentId:1}],B=[{value:1,title:"\u0102n u\u1ed1ng",children:[{value:2,title:"\u0102n"},{value:3,title:"U\u1ed1ng"}]},{value:4,title:"Di chuy\u1ec3n",children:[{value:5,title:"G\u1eedi xe"},{value:6,title:"Grab/Taxi"}]},{value:7,title:"Mua s\u1eafm",children:[{value:7,title:"Qu\u1ea7n \xe1o"},{value:9,title:"Gi\xe0y, d\xe9p"}]},{value:10,title:"Ph\u1ee5",children:[{value:11,title:"Cho"},{value:12,title:"Chi"}]}],z=r(44),G=r.n(z),Q=r(122);var V=Object(T.b)((function(e){return{propRecord:e.record,propError:e.error}}),(function(e){return{onCreate:function(t){return e(function(e){var t=JSON.parse(localStorage.getItem("auth"));return function(r){v.a.post(S+"records.json?auth="+t.idToken,e).then((function(e){console.log("add record response: ",e),L.b.success("Success! Record information saved successfully."),r(M({response:e},!1))})).catch((function(e){console.log(e.repsonse),L.b.error("Opps! Something went wrong. Unable to save record record."),r(M(null,!0))}))}}(t))},onUpdate:function(t){return e(function(e){var t=JSON.parse(localStorage.getItem("auth"));return function(r,n){v.a.put(S+"records/"+e.key+".json?auth="+t.idToken,e).then((function(e){var t=e.data;n().records.forEach((function(e){e.key===t.key&&(e=t)})),L.b.success("Success! Record information saved successfully."),r(M(t,!1))})).catch((function(e){console.log(e.repsonse),L.b.error("Opps! Something went wrong. Unable to save record record."),r(Y(n().records,!0))}))}}(t))}}}))((function(e){var t,r,o=a.a.createRef(),c=(JSON.parse(localStorage.getItem("auth")),{amount:0,time:new Date,type:null}),i=Object(n.useState)((null===(t=e.location.state)||void 0===t?void 0:t.record)||c),l=Object(R.a)(i,2),d=l[0],u=l[1],j=Object(n.useState)(!1),p=Object(R.a)(j,2),h=p[0],O=(p[1],Object(n.useState)(!1)),f=Object(R.a)(O,2),g=f[0],x=f[1],v=Object(n.useState)(""),y=Object(R.a)(v,2),w=y[0];return y[1],Object(n.useEffect)((function(){e.propError&&(x(!1),L.b.error("Something went wrong. Unable to save record information."))}),[e.propError]),Object(n.useEffect)((function(){e.propRecord&&g&&(x(!1),e.history.push({pathname:"/records"}))}),[e.propRecord]),Object(k.jsx)(E.a,{className:F.FormContainer,children:Object(k.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[h&&w,Object(k.jsxs)(b.a,(r={name:"basic",ref:o},Object(D.a)(r,"name","control-ref"),Object(D.a)(r,"onFinish",(function(){console.log("onFinish data : ",d),console.log("props.location.state : ",e.location.state),e.location.state&&e.location.state.record&&e.location.state.record.key?(x(!0),e.onUpdate(Object(s.a)(Object(s.a)({},d),{},{updatedAt:new Date,key:e.location.state.record.key}))):(x(!0),e.onCreate(Object(s.a)(Object(s.a)({},d),{},{createdAt:new Date,updatedAt:new Date,deletedAt:null})),x(!0))})),Object(D.a)(r,"children",[Object(k.jsx)(Q.a,{className:"ant-input w-full",thousandSeparator:!0,suffix:"\u0111",style:{textAlign:"right"},value:d.amount,onValueChange:function(e){u(Object(s.a)(Object(s.a)({},d),{},{amount:e.floatValue}))}}),Object(k.jsx)("br",{}),Object(k.jsx)(A.a,{style:{width:"100%"},value:d.type,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:B,placeholder:"Please select",treeDefaultExpandAll:!0,onChange:function(e){u(Object(s.a)(Object(s.a)({},d),{},{type:e}))}}),Object(k.jsx)("br",{}),Object(k.jsx)(I.a,{className:"m-t-md w-full",name:"time",onChange:function(e){return u(Object(s.a)(Object(s.a)({},d),{},{time:new Date(e)}))},defaultValue:d.time?G()(d.time,"YYYY-MM-DD"):null}),Object(k.jsx)("br",{}),Object(k.jsx)(m.a,{className:"m-t-md",type:"primary",htmlType:"submit",disabled:g,loading:g,children:g?"Saving..":"Submit"})]),r))]})})})),W=r(180),K=r(294),X=r(295),Z=r(88),$=r(181);function ee(e){return e||(e=0),Object(k.jsx)(Q.a,{value:e,displayType:"text",suffix:" \u0111",thousandSeparator:!0})}var te=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).user=JSON.parse(localStorage.getItem("auth")),n.cols=[{title:"Day",key:"day",render:function(e,t){return Object(k.jsx)("span",{children:t&&t.days[0]&&t.days[0].time?G()(t.days[0].time).format("DD-MM-YYYY"):null})}},{title:"Total",key:"total",render:function(e,t){return Object(k.jsx)("span",{className:"float-right color-red bold",children:ee((r=t.days,r.reduce((function(e,t){return e+(t.amount||0)}),0)))});var r}}],n.subColumns=[{title:"type",dataIndex:"type",key:"type",render:function(e,t){return Object(k.jsx)("span",{onClick:function(){return n.onEdit(t)},children:q.find((function(e){return e.id==t.type}))?q.find((function(e){return e.id==t.type})).name:null})}},{title:"Amount",dataIndex:"amount",key:"amount",render:function(e,t){return Object(k.jsxs)("span",{className:"float-right",children:[Object(k.jsx)("span",{onClick:function(){return n.onEdit(t)},children:ee(t.amount)})," ",Object(k.jsx)(K.a,{title:"Are you sure you want to delete?",onConfirm:function(){return n.props.onDelete(t)},okText:"Delete",cancelText:"No",placement:"left",children:Object(k.jsx)(Z.a,{className:$.BtnDelete})})]})}}],n.onEdit=function(e){n.props.history.push({pathname:"/records/record",state:{record:e}})},n.navigate=function(){n.props.history.push({pathname:"/records/record"})},n.state={records:[],error:!1,loading:!1,message:""},n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.getRecords()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{children:Object(k.jsx)(X.a,{rowKey:"day",dataSource:this.props.propRecords,columns:this.cols,size:"small",pagination:!1,scroll:{x:"100%"},showHeader:!1,defaultExpandAllRows:!0,expandedRowRender:function(t){return Object(k.jsx)(X.a,{rowKey:"key",columns:e.subColumns,dataSource:t.days,pagination:!1,showHeader:!1})}})})}}]),r}(a.a.Component),re=Object(T.b)((function(e){var t,r=e.records,n={},a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;a[t]=o.filter((function(r){var n=r.time;return!!n&&"".concat(e,"-").concat(t)===n.slice(5,10)}))},o=Object(W.a)(r);try{for(o.s();!(t=o.n()).done;){var c=t.value.time;if(c){var s=c.match(/\d+/g),i=Object(R.a)(s,3),l=(i[0],i[1]),d=i[2];n||(n={}),a(l,d)}}}catch(O){o.e(O)}finally{o.f()}for(var u=[],j=0,p=Object.entries(n);j<p.length;j++){var b=Object(R.a)(p[j],2),h=b[0],m=b[1];u.push({day:h,days:m})}return console.log(u),{propRecords:u,propError:e.error}}),(function(e){return{onDelete:function(t){return e(function(e){var t=JSON.parse(localStorage.getItem("auth"));return function(r,n){v.a.delete(S+"records/"+e.key+"/.json?auth="+t.idToken).then((function(t){var a=n().records.filter((function(t){return t.key!==e.key}));r(Y(a,!1)),L.b.success("Record record deleted.")})).catch((function(e){console.log(e.response),r(Y(null,!0)),L.b.error("Opps! Something went wrong. Unable to delete record record.")}))}}(t))},getRecords:function(){return e(function(){var e=JSON.parse(localStorage.getItem("auth"));return function(t){v.a.get(S+"records.json?auth="+e.idToken).then((function(e){var r=[];for(var n in e.data)r.push({key:n,amount:e.data[n].amount,type:e.data[n].type,time:e.data[n].time,createdAt:e.data[n].createdAt});t(Y(r,!1))})).catch((function(e){console.log(e.repsonse),t(Y([],!0)),L.b.error("Session expired, Please login.")}))}}())}}}))(te),ne=r(145),ae=r(58),oe=r(300),ce=r(306),se=r(307),ie=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={current:window.location.pathname},e.navigate=function(t){e.props.history.push(t.key),"/login"===t.key?localStorage.clear():e.setState({current:window.location.pathname})},e}return Object(l.a)(r,[{key:"render",value:function(){var e=this.state.current,t=Object(k.jsxs)(ae.a,{onClick:this.navigate,selectedKeys:[e],mode:"horizontal",theme:"dark",children:[Object(k.jsx)(ae.a.Item,{icon:Object(k.jsx)(ce.a,{}),children:"Records"},"/"),Object(k.jsx)(ae.a.Item,{icon:Object(k.jsx)(se.a,{}),className:ne.Logout,children:"Logout"},"/login")]});return Object(k.jsx)(oe.a,{className:ne.AppHeader,children:t})}}]),r}(a.a.Component),le=r(183),de=r(308),ue=r(97);var je=function(e){return Object(k.jsx)("footer",{className:le.Footer,children:Object(k.jsx)(ue.b,{to:"/records/record",children:Object(k.jsx)(de.a,{width:300})})})},pe=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e,t,r=localStorage.getItem("auth");return e=Object(k.jsx)(j.d,{}),r?(e=Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{path:"/records/record",component:V}),Object(k.jsx)(j.b,{path:"/records",component:re}),Object(k.jsx)(j.b,{path:"/",extact:!0,component:re}),Object(k.jsx)(j.a,{from:"/login",to:"/record"})]}),t=Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(ie,Object(s.a)({},this.props)),Object(k.jsx)("main",{children:e}),Object(k.jsx)(je,{})]})):(e=Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{path:"/login",component:C}),Object(k.jsx)(j.b,{path:"/",extact:!0,component:C}),Object(k.jsx)(j.a,{from:"/record",to:"/login"})]}),t=Object(k.jsx)("div",{className:"App",children:e})),Object(k.jsx)(a.a.Fragment,{children:t})}}]),r}(n.Component),be=Object(j.g)(pe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=r(100),me={records:[],updated:!1,error:!1},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(s.a)(Object(s.a)({},e),{},{records:t.records,error:t.error});case J:return Object(s.a)(Object(s.a)({},e),{},{record:t.record});case P:return Object(s.a)(Object(s.a)({},e),{},{record:t.record,error:t.error});case U:return console.log(t),Object(s.a)(Object(s.a)({},e),{},{updated:t.updated});default:return e}},fe=r(184),ge=Object(he.c)(Oe,Object(he.a)((function(e){return function(e){return function(t){return e(t)}}}),fe.a));c.a.render(Object(k.jsx)(a.a.Fragment,{children:Object(k.jsx)(ue.a,{children:Object(k.jsx)(T.a,{store:ge,children:Object(k.jsx)(be,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,r){e.exports={Login:"Login_Login__3HZR_",LoginContainer:"Login_LoginContainer__37N0b",LoginCard:"Login_LoginCard__2LDlw","ant-card-body":"Login_ant-card-body__2jmDS",Logo:"Login_Logo__2MwYJ",Error:"Login_Error__25cPh"}}},[[292,1,2]]]);
//# sourceMappingURL=main.18d6f22f.chunk.js.map